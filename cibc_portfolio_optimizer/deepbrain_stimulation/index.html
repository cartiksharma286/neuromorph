<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DBS-PTSD Treatment System</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <!-- Warning Banner -->
    <div class="warning-banner">
        <div class="warning-content">
            <span class="warning-icon">‚ö†</span>
            <span>RESEARCH & EDUCATIONAL USE ONLY - Not for clinical application</span>
        </div>
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1 class="title">
                    <span class="title-icon">üß†</span>
                    Deep Brain Stimulation for PTSD Treatment
                </h1>
                <p class="subtitle">AI-Powered Circuit Design & Parameter Optimization</p>
            </div>
            <div class="status-indicator">
                <div class="status-dot" id="statusDot"></div>
                <span id="statusText">Initializing...</span>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="nav-tabs">
            <button class="nav-tab active" data-module="circuit">
                <span class="tab-icon">‚ö°</span>
                Circuit Designer
            </button>
            <button class="nav-tab" data-module="brain">
                <span class="tab-icon">üß†</span>
                3D Brain Model
            </button>
            <button class="nav-tab" data-module="waveform">
                <span class="tab-icon">üìä</span>
                Waveform Generator
            </button>
            <button class="nav-tab" data-module="ai">
                <span class="tab-icon">ü§ñ</span>
                AI Optimizer
            </button>
            <button class="nav-tab" data-module="clinical">
                <span class="tab-icon">üìà</span>
                Clinical Dashboard
            </button>
            <button class="nav-tab" data-module="fea">
                <span class="tab-icon">‚ö°</span>
                FEA Simulation
            </button>
            <button class="nav-tab" data-module="protocol">
                <span class="tab-icon">üìã</span>
                Treatment Protocols
            </button>
            <button class="nav-tab" data-module="ocd">
                <span class="tab-icon">üîÑ</span>
                OCD Treatment
            </button>
            <button class="nav-tab" data-module="asd">
                <span class="tab-icon">üß©</span>
                ASD Treatment
            </button>

            <button class="nav-tab" data-module="sad">
                <span class="tab-icon">‚ùÑÔ∏è</span>
                Seasonal Affective Disorder
            </button>
            <button class="nav-tab" data-module="tbi">
                <span class="tab-icon">üî¥</span>
                TBI Repair (Hate Crime)
            </button>
        </nav>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Circuit Designer Module -->
            <div class="module active" id="circuitModule">
                <div class="module-header">
                    <h2>DBS Circuit Schematic Designer</h2>
                    <p>Professional-grade circuit schematics for deep brain stimulation devices</p>
                </div>

                <div class="grid-2">
                    <div class="card">
                        <h3>Circuit Components</h3>
                        <div class="component-list">
                            <button class="component-btn" data-component="electrode-array">
                                <span class="component-icon">üîå</span>
                                <div>
                                    <div class="component-name">Electrode Array</div>
                                    <div class="component-desc">Multi-contact lead system</div>
                                </div>
                            </button>
                            <button class="component-btn" data-component="pulse-generator">
                                <span class="component-icon">‚ö°</span>
                                <div>
                                    <div class="component-name">Pulse Generator</div>
                                    <div class="component-desc">Programmable current source</div>
                                </div>
                            </button>
                            <button class="component-btn" data-component="power-management">
                                <span class="component-icon">üîã</span>
                                <div>
                                    <div class="component-name">Power Management</div>
                                    <div class="component-desc">Battery & wireless charging</div>
                                </div>
                            </button>
                            <button class="component-btn" data-component="safety-system">
                                <span class="component-icon">üõ°Ô∏è</span>
                                <div>
                                    <div class="component-name">Safety System</div>
                                    <div class="component-desc">Monitoring & protection</div>
                                </div>
                            </button>
                            <button class="component-btn" data-component="signal-processing">
                                <span class="component-icon">üì°</span>
                                <div>
                                    <div class="component-name">Signal Processing</div>
                                    <div class="component-desc">LFP recording & feedback</div>
                                </div>
                            </button>
                            <button class="component-btn" data-component="complete">
                                <span class="component-icon">üîß</span>
                                <div>
                                    <div class="component-name">Complete System</div>
                                    <div class="component-desc">Full device schematic</div>
                                </div>
                            </button>
                        </div>
                    </div>

                    <div class="card">
                        <h3>Circuit Schematic</h3>
                        <div id="circuitDisplay" class="circuit-display">
                            <div class="empty-state">
                                <span class="empty-icon">‚ö°</span>
                                <p>Select a component to view schematic</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>SVG Circuit Diagram</h3>
                    <div id="svgDisplay" class="svg-display"></div>
                </div>
            </div>

            <!-- 3D Brain Model Module -->
            <div class="module" id="brainModule">
                <div class="module-header">
                    <h2>3D Brain Visualization</h2>
                    <p>Interactive brain model with target regions for DBS</p>
                </div>

                <div class="grid-2">
                    <div class="card">
                        <h3>Target Regions</h3>
                        <div class="region-list" id="regionList"></div>
                    </div>

                    <div class="card full-height">
                        <h3>3D Brain Model</h3>
                        <div id="brainCanvas" class="brain-canvas"></div>
                    </div>
                </div>
            </div>

            <!-- Waveform Generator Module -->
            <div class="module" id="waveformModule">
                <div class="module-header">
                    <h2>Stimulation Waveform Generator</h2>
                    <p>Design and optimize DBS stimulation parameters</p>
                </div>

                <div class="grid-2">
                    <div class="card">
                        <h3>Parameters</h3>
                        <div class="parameter-controls" id="parameterControls"></div>

                        <div class="safety-status" id="safetyStatus"></div>

                        <button class="btn-primary" id="simulateBtn">
                            <span>‚ñ∂</span> Simulate Stimulation
                        </button>
                    </div>

                    <div class="card">
                        <h3>Waveform Preview</h3>
                        <canvas id="waveformCanvas" class="waveform-canvas"></canvas>

                        <h3 style="margin-top: 2rem;">Safety Metrics</h3>
                        <div id="safetyMetrics" class="metrics-grid"></div>
                    </div>
                </div>
            </div>

            <!-- AI Optimizer Module -->
            <div class="module" id="aiModule">
                <div class="module-header">
                    <h2>Gemini 3.0 AI-Driven Parameter Optimization</h2>
                    <p>Generative AI models with Proprioceptive Feedback and FEA Integration</p>
                </div>

                <div class="grid-3">
                    <div class="card">
                        <h3>VAE Generator</h3>
                        <p class="card-desc">Variational Autoencoder for pattern learning</p>
                        <button class="btn-secondary" id="trainVAEBtn">Train VAE</button>
                        <button class="btn-primary" id="generateVAEBtn">Generate Parameters</button>
                        <div id="vaeResults" class="results-container"></div>
                    </div>

                    <div class="card">
                        <h3>GAN Optimizer</h3>
                        <p class="card-desc">Generative Adversarial Network for waveform optimization</p>
                        <button class="btn-secondary" id="trainGANBtn">Train GAN</button>
                        <button class="btn-primary" id="generateGANBtn">Generate Parameters</button>
                        <div id="ganResults" class="results-container"></div>
                    </div>

                    <div class="card">
                        <h3>Gemini 3.0 RL Agent</h3>
                        <p class="card-desc">Reinforcement Learning with Proprioceptive Feedback</p>
                        <button class="btn-primary" id="optimizeRLBtn">Optimize with Gemini 3.0</button>
                        <div id="rlResults" class="results-container"></div>
                    </div>
                </div>

                <div class="grid-2">
                    <div class="card">
                        <h3>Training Progress</h3>
                        <canvas id="trainingCanvas" class="training-canvas"></canvas>
                    </div>
                    <div class="card">
                        <h3>Proprioceptive Feedback Loop</h3>
                        <p class="card-desc">Real-time system state stability and gradient sensation</p>
                        <canvas id="proprioceptionCanvas" class="training-canvas"
                            style="border-color: var(--secondary);"></canvas>
                        <div id="feaIntegrationStatus"
                            style="margin-top:10px; font-size:0.9em; color:var(--text-secondary);">
                            Linked to FEA Simulator: <span style="color:var(--secondary);">Active</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Clinical Dashboard Module -->
            <div class="module" id="clinicalModule">
                <div class="module-header">
                    <h2>Clinical Monitoring Dashboard</h2>
                    <p>PTSD symptom tracking and treatment efficacy</p>
                </div>

                <div class="grid-4">
                    <div class="metric-card">
                        <div class="metric-label">Hyperarousal</div>
                        <div class="metric-value" id="metricHyperarousal">--</div>
                        <div class="metric-bar">
                            <div class="metric-fill" id="barHyperarousal"></div>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Re-experiencing</div>
                        <div class="metric-value" id="metricReexperiencing">--</div>
                        <div class="metric-bar">
                            <div class="metric-fill" id="barReexperiencing"></div>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Avoidance</div>
                        <div class="metric-value" id="metricAvoidance">--</div>
                        <div class="metric-bar">
                            <div class="metric-fill" id="barAvoidance"></div>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Negative Cognition</div>
                        <div class="metric-value" id="metricNegativeCognition">--</div>
                        <div class="metric-bar">
                            <div class="metric-fill" id="barNegativeCognition"></div>
                        </div>
                    </div>
                </div>

                <div class="grid-2">
                    <div class="card">
                        <h3>Treatment Prediction</h3>
                        <div class="prediction-controls">
                            <label>Treatment Duration (weeks)</label>
                            <input type="number" id="treatmentWeeks" value="12" min="1" max="52">
                            <button class="btn-primary" id="predictBtn">Predict Response</button>
                        </div>
                        <canvas id="predictionCanvas" class="prediction-canvas"></canvas>
                    </div>

                    <div class="card">
                        <h3>Biomarkers</h3>
                        <div id="biomarkers" class="biomarkers-grid"></div>
                    </div>
                </div>

                <div class="card">
                    <h3>Neural Activity</h3>
                    <canvas id="neuralCanvas" class="neural-canvas"></canvas>
                </div>
            </div>
            <!-- FEA Simulation Module -->
            <div class="module" id="feaModule">
                <div class="module-header">
                    <h2>Finite Element Analysis (FEA)</h2>
                    <p>Simulate electric field distribution and volume of tissue activated (VTA)</p>
                </div>

                <div class="grid-2">
                    <div class="card">
                        <h3>Simulation Controls</h3>
                        <div class="control-group">
                            <label>Target Coordinates (X, Y)</label>
                            <div style="display: flex; gap: 10px;">
                                <input type="number" id="targetX" value="32" min="0" max="63">
                                <input type="number" id="targetY" value="32" min="0" max="63">
                            </div>
                        </div>
                        <div class="control-group">
                            <label>Active Contact Voltage (V)</label>
                            <input type="number" id="voltageC1" value="-3.0" step="0.1">
                        </div>
                        <div style="margin-top: 20px;">
                            <button class="btn-primary" id="runFeaBtn">Run Simulation</button>
                            <button class="btn-secondary" id="optimizeFeaBtn">Auto-Optimize Platform</button>
                        </div>
                        <div id="feaStats" style="margin-top: 20px; font-family: monospace;"></div>
                    </div>

                    <div class="card">
                        <h3>Field Visualizations</h3>
                        <div class="grid-2" style="gap: 10px;">
                            <div>
                                <img id="imgPotential" style="width:100%; border-radius: 8px; border: 1px solid #333;"
                                    alt="Potential">
                                <div style="text-align:center; font-size: 0.8em; color: #888;">Potential Map</div>
                            </div>
                            <div>
                                <img id="imgEField" style="width:100%; border-radius: 8px; border: 1px solid #333;"
                                    alt="E-Field">
                                <div style="text-align:center; font-size: 0.8em; color: #888;">E-Field Magnitude</div>
                            </div>
                            <div>
                                <img id="imgVTA" style="width:100%; border-radius: 8px; border: 1px solid #333;"
                                    alt="VTA">
                                <div style="text-align:center; font-size: 0.8em; color: #888;">VTA Mask</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Protocol Module -->
            <div class="module" id="protocolModule">
                <div class="module-header">
                    <h2>Multi-Stage Treatment Paradigm Optimizer</h2>
                    <p>Design and simulate sequential treatment protocols for targeted zones</p>
                </div>

                <div class="grid-2">
                    <div class="card">
                        <h3>Protocol Configuration</h3>
                        <div class="control-group">
                            <label>Target Zones (Hold Ctrl to select multiple)</label>
                            <select id="protocolTargets" multiple
                                style="width: 100%; height: 100px; background: #1c1c1e; color: white; border: 1px solid #333; padding: 5px;">
                                <option value="amygdala" selected>Amygdala (Fear)</option>
                                <option value="hippocampus">Hippocampus (Memory)</option>
                                <option value="vmPFC">vmPFC (Regulation)</option>
                                <option value="hypothalamus">Hypothalamus (Stress)</option>
                                <option value="nucleus_basalis">Nucleus Basalis (Dementia)</option>
                                <option value="fornix">Fornix (Alzheimer's)</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label>Total Duration (Weeks)</label>
                            <input type="number" id="protocolDuration" value="12" min="4" max="52">
                        </div>
                        <button class="btn-primary" id="optimizeProtocolBtn" style="margin-top: 20px;">Generate
                            Optimized Protocol</button>
                    </div>

                    <div class="card">
                        <h3>Generated Sequence</h3>
                        <div id="protocolTimeline" style="height: 300px; overflow-y: auto; font-size: 0.9em;">
                            <div class="empty-state">No protocol generated yet.</div>
                        </div>
                        <div class="metric-value" id="protocolProjection"
                            style="margin-top: 10px; font-size: 1.2em; color: #4cd964;"></div>
                        <div class="card" style="margin-top: 20px;">
                            <h3>Gemini 3.0 Optimal Treatment Paradigm</h3>
                            <div id="geminiParadigmDisplay"
                                style="padding: 15px; background: rgba(0, 212, 255, 0.05); border-radius: 8px; border: 1px solid var(--border-color);">

                                <div
                                    style="display:flex; align-items:center; justify-content: space-between; margin-bottom:15px;">
                                    <div style="display:flex; align-items:center; gap:10px;">
                                        <span style="font-size:1.5em;">‚ú®</span>
                                        <strong style="color:var(--primary); font-size: 1.2em;">Gemini 3.0 Multimodal
                                            Reasoning Engine</strong>
                                    </div>
                                    <span class="status-badge"
                                        style="background:#32d74b33; color:#32d74b; padding:4px 8px; border-radius:4px; font-size:0.8em;">OPTIMIZED</span>
                                </div>

                                <div class="grid-2">
                                    <!-- BEM Visualization -->
                                    <div style="background:var(--bg-dark); padding:10px; border-radius:8px;">
                                        <div
                                            style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
                                            <h4 style="color:#aaa; font-size:0.9em; margin:0;">BEM Cortical Surface
                                                Simulation</h4>
                                            <button id="generateBemBtn"
                                                style="background:var(--bg-elevated); border:1px solid var(--border-color); color:var(--text-secondary); padding:2px 8px; border-radius:4px; font-size:0.8em; cursor:pointer;"
                                                title="Regenerate BEM Model">‚Üª Sim</button>
                                        </div>
                                        <canvas id="corticalCanvas" width="400" height="300"></canvas>
                                        <div
                                            style="display:flex; justify-content:space-between; margin-top:5px; font-size:0.8em; color:#fff;">
                                            <span>Max E-Field: <span id="bemFieldVal"
                                                    style="color:var(--secondary)">--</span> V/m</span>
                                            <span>VTA Intersection: <span id="bemInterVal"
                                                    style="color:var(--warning)">--</span>%</span>
                                        </div>
                                    </div>

                                    <!-- Reasoning Logs & Connectome -->
                                    <div style="display:flex; flex-direction:column; gap:10px;">
                                        <div style="background:var(--bg-elevated); padding:10px; border-radius:8px;">
                                            <h4 style="color:#aaa; font-size:0.9em; margin-bottom:5px;">Connectome
                                                Constraints</h4>
                                            <div class="metrics-grid" style="grid-template-columns: 1fr 1fr;">
                                                <div>
                                                    <div style="font-size:0.8em; color:#888;">Pathway Integrity</div>
                                                    <div id="connIntegrity" style="font-size:1.2em; color:#fff;">--
                                                    </div>
                                                </div>
                                                <div>
                                                    <div style="font-size:0.8em; color:#888;">Struct. Conn.</div>
                                                    <div id="connStruct" style="font-size:1.2em; color:#fff;">--</div>
                                                </div>
                                            </div>
                                        </div>

                                        <div
                                            style="flex-grow:1; background:var(--bg-dark); padding:10px; border-radius:8px; border-left: 2px solid var(--primary);">
                                            <h4 style="color:#aaa; font-size:0.9em; margin-bottom:5px;">Reasoning Trace
                                            </h4>
                                            <div id="reasoningLogs"
                                                style="font-family:monospace; font-size:0.8em; color:#ccc; height:150px; overflow-y:auto;">
                                                <span style="color:#555;">> Awaiting optimization...</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
        </main>

        <!-- OCD Treatment Module -->
        <div class="module" id="ocdModule">
            <div class="module-header">
                <h2>OCD: Cyclic Reasoning & DBS Interventions</h2>
                <p>Target the OFC-Caudate-Thalamus loop to break critical obsessiveness cycles</p>
            </div>

            <div class="grid-2">
                <div class="card">
                    <h3>DBS Parameters for OCD</h3>
                    <div class="control-group">
                        <label>Target Region</label>
                        <select id="ocdTarget"
                            style="width: 100%; padding: 8px; background: #333; color: white; border: 1px solid #555;">
                            <option value="caudate" selected>Caudate Nucleus (Gating)</option>
                            <option value="stn">Subthalamic Nucleus (STN)</option>
                            <option value="vc_vs">Ventral Capsule / Ventral Striatum</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label>Frequency (Hz)</label>
                        <input type="number" id="ocdFreq" value="130" min="2" max="250">
                    </div>
                    <div class="control-group">
                        <label>Amplitude (mA)</label>
                        <input type="number" id="ocdAmp" value="3.0" step="0.1" min="0">
                    </div>

                    <div style="margin-top: 20px;">
                        <button class="btn-secondary" id="runSingleOcdBtn">Run Single Simulation</button>
                    </div>

                    <div id="singleResult"
                        style="margin-top: 15px; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 5px;">
                        <div style="font-size: 0.9em; color: #aaa;">Current State</div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>Loop Gain: <b id="valGain" style="color: var(--secondary)">--</b></span>
                            <span>YBOCS: <b id="valYbocs" style="color: var(--warning)">--</b></span>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>Statistical Clinical Trial Design</h3>
                    <div class="control-group">
                        <label>Sample Size (N)</label>
                        <input type="number" id="trialN" value="50" min="10" max="500">
                    </div>
                    <div class="control-group">
                        <label>Significance Threshold (alpha)</label>
                        <input type="number" id="trialAlpha" value="0.05" step="0.01">
                    </div>

                    <button class="btn-primary" id="runTrialBtn" style="width: 100%; margin-top: 10px;">
                        <span>üìä</span> Run Statistical Trial
                    </button>

                    <div id="trialResults" style="margin-top: 15px; display: none;">
                        <h4 style="margin-bottom: 5px;">Trial Outcome</h4>
                        <div class="metrics-grid" style="grid-template-columns: 1fr 1fr;">
                            <div class="metric-card" style="padding: 10px;">
                                <div class="metric-label">Mean YBOCS Red.</div>
                                <div class="metric-value" id="resRed" style="font-size: 1.2em;">--%</div>
                            </div>
                            <div class="metric-card" style="padding: 10px;">
                                <div class="metric-label">P-Value</div>
                                <div class="metric-value" id="resP" style="font-size: 1.2em;">--</div>
                            </div>
                        </div>
                        <div id="resSig" style="text-align: center; margin-top: 10px; font-weight: bold;"></div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3>Population Distribution (Pre vs Post)</h3>
                <canvas id="ocdTrialCanvas" style="width: 100%; height: 300px;"></canvas>
            </div>

            <!-- OCD Schematic Section -->
            <div class="card" style="margin-top: 20px;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <h3>OCD Treatment Circuit Schematic & Specs</h3>
                    <button id="loadOcdSchematicBtn" class="btn-secondary" style="font-size: 0.8em;">Show
                        Schematic</button>
                </div>

                <div id="ocdSchematicContent" style="display: none; margin-top: 15px;">
                    <div class="grid-2">
                        <div style="background: #111; padding: 15px; border-radius: 8px; border: 1px solid #333;">
                            <h4>Electrical Specifications</h4>
                            <div id="ocdSpecsList"
                                style="font-family: monospace; font-size: 0.9em; line-height: 1.6; color: #ccc;">
                                <!-- Specs injected here -->
                            </div>
                        </div>
                        <div id="ocdSvgContainer"
                            style="background: #000; border: 1px solid #333; border-radius: 8px; overflow: hidden; display: flex; align-items: center; justify-content: center;">
                            <!-- SVG injected here -->
                        </div>
                    </div>
                </div>
            </div>
            <!-- Quantum Optimization Section -->
            <div class="card" style="margin-top:20px;">
                <h3>Quantum Surface Integral Optimization</h3>
                <p style="font-size:0.9em; color:#aaa;">Correlate FEA E-Field distribution with OCD Attractor Energy
                    States.</p>
                <button id="runQuantumFeaBtn" class="btn-primary" style="margin-top:10px;">
                    <span>‚öõÔ∏è</span> Optimize Quantum-FEA Protocol
                </button>
                <div id="quantumFeaResults" style="display:none;"></div>
            </div>
        </div>
    </div>

    <!-- ASD Treatment Module -->
    <div class="module" id="asdModule">
        <div class="module-header">
            <h2>üß© Autism Spectrum Disorder: Quantum Neural Repair</h2>
            <p>Deep Brain Stimulation with Quantum Surface Integrals & Stochastic Correlations for Correlational Repair
            </p>
        </div>

        <!-- Treatment Configuration -->
        <div class="grid-2">
            <div class="card">
                <h3>DBS Configuration for ASD</h3>
                <div class="control-group">
                    <label>Severity Level</label>
                    <select id="asdSeverity"
                        style="width: 100%; padding: 8px; background: #333; color: white; border: 1px solid #555;">
                        <option value="mild">Mild (Level 1)</option>
                        <option value="moderate" selected>Moderate (Level 2)</option>
                        <option value="severe">Severe (Level 3)</option>
                    </select>
                </div>
                <div class="control-group">
                    <label>Target Brain Region</label>
                    <select id="asdTarget"
                        style="width: 100%; padding: 8px; background: #333; color: white; border: 1px solid #555;">
                        <option value="ACC" selected>Anterior Cingulate Cortex (ACC)</option>
                        <option value="amygdala">Amygdala (Social Processing)</option>
                        <option value="striatum">Striatum (Repetitive Behaviors)</option>
                        <option value="thalamus">Thalamus (Sensory Integration)</option>
                    </select>
                </div>
                <div class="control-group">
                    <label>Stimulation Frequency (Hz)</label>
                    <input type="number" id="asdFreq" value="130" min="20" max="185">
                </div>
                <div class="control-group">
                    <label>Amplitude (mA)</label>
                    <input type="number" id="asdAmp" value="2.5" step="0.1" min="0.5" max="5.0">
                </div>
                <button class="btn-primary" id="runAsdOptimizationBtn" style="width: 100%; margin-top: 15px;">
                    <span>‚öõÔ∏è</span> Run Quantum Neural Repair
                </button>
            </div>

            <div class="card">
                <h3>Continued Fraction Correlational Repair</h3>
                <p style="font-size: 0.9em; color: #aaa; margin-bottom: 15px;">
                    Using continued fractions to model neural connectivity repair dynamics
                </p>
                <canvas id="continuedFractionCanvas" width="400" height="300"
                    style="width: 100%; border: 1px solid #333; border-radius: 8px;"></canvas>
                <div id="fractionMetrics" style="margin-top: 10px; font-family: monospace; font-size: 0.85em;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div>
                            <div style="color: #888;">Convergence Rate:</div>
                            <div id="convRate" style="color: var(--secondary); font-size: 1.1em;">--</div>
                        </div>
                        <div>
                            <div style="color: #888;">Repair Index:</div>
                            <div id="repairIdx" style="color: var(--primary); font-size: 1.1em;">--</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quantum Surface Integrals -->
        <div class="card">
            <h3>‚öõÔ∏è Quantum Surface Integral Analysis</h3>
            <p style="font-size: 0.9em; color: #aaa;">
                Computing quantum mechanical surface integrals over neural connectivity manifolds
            </p>
            <div class="grid-3" style="margin-top: 15px;">
                <div
                    style="background: var(--bg-elevated); padding: 15px; border-radius: 8px; border-left: 3px solid var(--primary);">
                    <div style="font-size: 0.8em; color: #888; margin-bottom: 5px;">Surface Integral</div>
                    <div id="surfaceIntegral" style="font-size: 1.5em; color: var(--primary); font-family: monospace;">
                        --</div>
                    <div style="font-size: 0.75em; color: #666; margin-top: 5px;">‚àÆ‚àÆ œà*‚àáœà ¬∑ dS</div>
                </div>
                <div
                    style="background: var(--bg-elevated); padding: 15px; border-radius: 8px; border-left: 3px solid var(--secondary);">
                    <div style="font-size: 0.8em; color: #888; margin-bottom: 5px;">Transition Probability</div>
                    <div id="transProb" style="font-size: 1.5em; color: var(--secondary); font-family: monospace;">--
                    </div>
                    <div style="font-size: 0.75em; color: #666; margin-top: 5px;">|‚ü®œà_f|H|œà_i‚ü©|¬≤</div>
                </div>
                <div
                    style="background: var(--bg-elevated); padding: 15px; border-radius: 8px; border-left: 3px solid var(--warning);">
                    <div style="font-size: 0.8em; color: #888; margin-bottom: 5px;">Correlation Energy</div>
                    <div id="corrEnergy" style="font-size: 1.5em; color: var(--warning); font-family: monospace;">--
                    </div>
                    <div style="font-size: 0.75em; color: #666; margin-top: 5px;">E_corr = ‚ü®Œ®|V|Œ®‚ü©</div>
                </div>
            </div>
        </div>

        <!-- Stochastic Correlation Analysis -->
        <div class="grid-2">
            <div class="card">
                <h3>üìä Stochastic Correlation Matrix</h3>
                <p style="font-size: 0.9em; color: #aaa;">
                    Neural connectivity correlations with stochastic dynamics and Gedanken state superpositions.
                </p>
                <canvas id="correlationMatrixCanvas" width="400" height="400"
                    style="width: 100%; border: 1px solid #333; border-radius: 8px;"></canvas>
                <div style="margin-top: 10px; display: flex; justify-content: space-between; font-size: 0.85em;">
                    <span style="color: #888;">Low Correlation</span>
                    <span style="color: var(--primary);">High Correlation</span>
                </div>
            </div>

            <div class="card">
                <h3>üí≠ Quantum Gedanken Experiments</h3>
                <p style="font-size: 0.9em; color: #aaa; margin-bottom: 10px;">
                    "Schr√∂dinger's Connectivity" Thought Experiment Results
                </p>

                <div
                    style="background: rgba(255, 255, 255, 0.05); padding: 15px; border-radius: 8px; border: 1px solid var(--border-color);">
                    <div style="font-family: monospace; color: var(--secondary); font-size: 1.1em; margin-bottom: 10px;"
                        id="gedankenSuperposition">
                        |Œ®‚ü© = Œ±|Repaired‚ü© + Œ≤|Disordered‚ü©
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 0.9em;">
                        <div>
                            <div style="color: #888;">Collapse Prob:</div>
                            <div id="gedankenCollapse" style="color: #fff;">--</div>
                        </div>
                        <div>
                            <div style="color: #888;">Entropy (S):</div>
                            <div id="gedankenEntropy" style="color: #fff;">--</div>
                        </div>
                        <div>
                            <div style="color: #888;">Coherence:</div>
                            <div id="gedankenCoherence" style="color: #fff;">--</div>
                        </div>
                        <div>
                            <div style="color: #888;">Zeno Effect:</div>
                            <div id="gedankenZeno" style="color: var(--warning);">--</div>
                        </div>
                    </div>
                </div>

                <h4 style="margin-top: 20px; font-size: 1em;">Statistical Improvement Metrics</h4>
                <div id="asdStatistics"
                    style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 10px;">
                    <!-- Replaced bars with pure metric cards -->
                    <div class="metric-card" style="padding: 10px; background: rgba(0,0,0,0.3);">
                        <div class="metric-label">Social Comm.</div>
                        <div class="metric-value" id="socialScore" style="color: var(--primary);">--</div>
                    </div>
                    <div class="metric-card" style="padding: 10px; background: rgba(0,0,0,0.3);">
                        <div class="metric-label">Repetitive Behav.</div>
                        <div class="metric-value" id="repetitiveScore" style="color: var(--secondary);">--</div>
                    </div>
                    <div class="metric-card" style="padding: 10px; background: rgba(0,0,0,0.3);">
                        <div class="metric-label">Sensory Proc.</div>
                        <div class="metric-value" id="sensoryScore" style="color: var(--warning);">--</div>
                    </div>
                    <div class="metric-card" style="padding: 10px; background: rgba(0,0,0,0.3);">
                        <div class="metric-label">Executive Func.</div>
                        <div class="metric-value" id="executiveScore" style="color: #00d4ff;">--</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Statistical Congruence & Inflection Reasoning -->
        <div class="grid-2">
            <div class="card">
                <h3>üìà Statistical Congruence Analysis</h3>
                <p style="font-size: 0.9em; color: #aaa;">
                    Recovery trajectory congruence with ideal sigmoidal models.
                </p>
                <div style="position: relative; height: 250px; width: 100%;">
                    <canvas id="congruenceCanvas"></canvas>
                </div>
                <div id="congScore"
                    style="text-align: right; margin-top: 5px; font-family: monospace; color: var(--primary);">
                    Corr: --
                </div>
            </div>

            <div class="card">
                <h3>mj Reasoning Inflection Points</h3>
                <p style="font-size: 0.9em; color: #aaa;">
                    Second-derivative analysis of recovery velocity.
                </p>
                <div style="position: relative; height: 250px; width: 100%;">
                    <canvas id="inflectionCanvas"></canvas>
                </div>
                <div id="inflectionReasoning"
                    style="margin-top: 10px; font-size: 0.85em; background: rgba(0,0,0,0.2); padding: 10px; border-radius: 5px;">
                    Awaiting theoretical derivation...
                </div>
            </div>
        </div>

        <!-- Circuit Schematic -->
        <div class="card">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <h3>üîå ASD-Specific DBS Circuit Schematic</h3>
                <button id="loadAsdSchematicBtn" class="btn-secondary" style="font-size: 0.8em;">
                    Show Circuit Design
                </button>
            </div>
            <div id="asdSchematicContent" style="display: none; margin-top: 15px;">
                <div class="grid-2">
                    <div style="background: #111; padding: 15px; border-radius: 8px; border: 1px solid #333;">
                        <h4>Electrical Specifications</h4>
                        <div id="asdSpecsList"
                            style="font-family: monospace; font-size: 0.9em; line-height: 1.6; color: #ccc;">
                            <!-- Specs injected here -->
                        </div>
                    </div>
                    <div id="asdSvgContainer"
                        style="background: #000; border: 1px solid #333; border-radius: 8px; overflow: hidden; display: flex; align-items: center; justify-content: center;">
                        <!-- SVG injected here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Mathematical Derivations -->
        <div class="card">
            <h3>üìê Mathematical Framework</h3>
            <div
                style="background: var(--bg-elevated); padding: 20px; border-radius: 8px; border-left: 3px solid var(--primary);">
                <h4 style="color: var(--primary); margin-bottom: 15px;">Continued Fraction Repair Dynamics</h4>
                <div style="font-family: 'Courier New', monospace; font-size: 0.9em; line-height: 1.8; color: #ccc;">
                    <div style="margin-bottom: 10px;">
                        <strong style="color: var(--secondary);">Connectivity Repair Function:</strong><br>
                        C(t) = a‚ÇÄ + 1/(a‚ÇÅ + 1/(a‚ÇÇ + 1/(a‚ÇÉ + ...)))
                    </div>
                    <div style="margin-bottom: 10px;">
                        <strong style="color: var(--secondary);">Quantum Surface Integral:</strong><br>
                        Œ¶ = ‚àÆ‚àÆ_S œà*(r)‚àáœà(r) ¬∑ nÃÇ dS
                    </div>
                    <div style="margin-bottom: 10px;">
                        <strong style="color: var(--secondary);">Stochastic Correlation:</strong><br>
                        œÅ(i,j) = ‚ü®(X_i - Œº_i)(X_j - Œº_j)‚ü© / (œÉ_i œÉ_j)
                    </div>
                    <div>
                        <strong style="color: var(--secondary);">Repair Convergence:</strong><br>
                        lim(n‚Üí‚àû) C_n = C* where |C_n - C*| &lt; Œµ
                    </div>
                </div>
            </div>
            <!-- SAD Treatment Module -->
            <div class="module" id="sadModule">
                <div class="module-header">
                    <h2>‚ùÑÔ∏è Seasonal Affective Disorder Treatment</h2>
                    <p>Circadian Rhythm Entrainment with Statistically Optimized DBS</p>
                </div>

                <div class="grid-2">
                    <!-- Simulation Controls -->
                    <div class="card">
                        <h3>Treatment Configuration</h3>
                        <div class="control-group">
                            <label>Target Region</label>
                            <select id="sad-target"
                                style="width: 100%; padding: 8px; background: #333; color: white; border: 1px solid #555;">
                                <option value="Lateral Habenula" selected>Lateral Habenula (LHb)</option>
                                <option value="SCN">Suprachiasmatic Nucleus (SCN)</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label>Stimulation Frequency (Hz)</label>
                            <input type="number" id="sad-frequency" value="135" min="2" max="250">
                        </div>
                        <div class="control-group">
                            <label>Treatment Paradigm</label>
                            <select id="sad-paradigm"
                                style="width: 100%; padding: 8px; background: #333; color: white; border: 1px solid #555;">
                                <option value="Standard" selected>Standard Protocols</option>
                                <option value="Adaptive">Adaptive (Bio-Feedback)</option>
                                <option value="Entrainment">Circadian Entrainment</option>
                            </select>
                        </div>

                        <div class="control-group">
                            <label>Amplitude (mA)</label>
                            <input type="number" id="sad-amplitude" value="2.5" step="0.1">
                        </div>

                        <button class="btn-primary" id="run-sad-sim" style="width: 100%; margin-top: 20px;">
                            <span>‚èØ</span> Run SAD Treatment Simulation
                        </button>
                    </div>

                    <!-- Neural Dynamics Plot -->
                    <div class="card">
                        <h3>Dynamics & Recovery</h3>
                        <div style="margin-bottom: 5px; font-size: 0.85em; color: #888;">Neural Oscillations</div>
                        <canvas id="sad-chart" height="120"></canvas>

                        <div style="margin-top: 15px; margin-bottom: 5px; font-size: 0.85em; color: #888;">Projected
                            Recovery Rate (12 Weeks)</div>
                        <canvas id="sad-recovery-chart" height="120"></canvas>
                    </div>
                </div>

                <!-- Analysis Results -->
                <div class="card" style="margin-top: 20px;">
                    <h3>üìä Post-Treatment Analysis & FEA</h3>
                    <div id="sad-ml-results" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">

                        <!-- DBS Profile Column -->
                        <div class="card" style="background: rgba(0,0,0,0.2); border: 1px solid #444;">
                            <h4 style="color: var(--primary);">‚ö° DBS Stimulation Profile</h4>
                            <div id="dbs-profile-content" style="font-size: 0.9em; margin-top: 10px;">
                                <div style="color: #888; text-align: center; padding: 20px;">Awaiting simulation...
                                </div>
                            </div>
                        </div>

                        <!-- Post-Treatment Column -->
                        <div class="card" style="background: rgba(0,0,0,0.2); border: 1px solid #444;">
                            <h4 style="color: var(--secondary);">üìà Post-Treatment Parameters</h4>
                            <div id="post-treatment-content" style="font-size: 0.9em; margin-top: 10px;">
                                <div style="color: #888; text-align: center; padding: 20px;">Awaiting simulation...
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            </main>
        </div>

        <!-- ======================== TBI Repair (Hate Crime) Module ======================== -->
        <div class="module" id="tbiModule">
            <div class="module-header">
                <h2>üî¥ TBI Neural Repair ‚Äî Hate Crime Survivors</h2>
                <p>DBS-mediated repair of traumatic brain injury in hate crime victims: CM-Pf Thalamus, DLPFC, Fornix,
                    ACC, Amygdala &amp; Raphe targets</p>
            </div>

            <!-- Configuration + Live Results -->
            <div class="grid-2">
                <!-- Configuration Panel -->
                <div class="card">
                    <h3>‚öôÔ∏è Patient &amp; DBS Configuration</h3>

                    <div class="control-group">
                        <label>Injury Type</label>
                        <select id="tbiInjuryType"
                            style="width:100%;padding:8px;background:#333;color:white;border:1px solid #555;">
                            <option value="blunt" selected>Blunt Force Trauma</option>
                            <option value="blast">Blast / Explosive</option>
                            <option value="penetrating">Penetrating TBI</option>
                        </select>
                    </div>

                    <div class="control-group">
                        <label>TBI Severity</label>
                        <select id="tbiSeverity"
                            style="width:100%;padding:8px;background:#333;color:white;border:1px solid #555;">
                            <option value="mild">Mild (Concussion)</option>
                            <option value="moderate" selected>Moderate (DAI)</option>
                            <option value="severe">Severe (Diffuse Axonal Injury)</option>
                        </select>
                    </div>

                    <div class="control-group">
                        <label>DBS Target Region</label>
                        <select id="tbiTarget"
                            style="width:100%;padding:8px;background:#333;color:white;border:1px solid #555;">
                            <option value="thalamus" selected>CM-Pf Thalamus (Arousal Recovery)</option>
                            <option value="dlPFC">DLPFC (Executive Function)</option>
                            <option value="fornix">Fornix (Memory Circuits)</option>
                            <option value="acc">ACC (Pain &amp; Affect)</option>
                            <option value="amygdala">Amygdala (Trauma Extinction)</option>
                            <option value="rn_raphe">Raphe Nuclei (Serotonin)</option>
                        </select>
                    </div>

                    <div class="control-group">
                        <label>Frequency (Hz)</label>
                        <input type="number" id="tbiFrequency" value="130" min="20" max="200">
                    </div>
                    <div class="control-group">
                        <label>Amplitude (mA)</label>
                        <input type="number" id="tbiAmplitude" value="3.0" step="0.1" min="0.5" max="6.0">
                    </div>
                    <div class="control-group">
                        <label>Pulse Width (Œºs)</label>
                        <input type="number" id="tbiPulseWidth" value="90" min="30" max="200">
                    </div>
                    <div class="control-group">
                        <label>Treatment Duration (weeks)</label>
                        <input type="number" id="tbiWeeks" value="12" min="2" max="52">
                    </div>

                    <div style="display:flex;gap:10px;margin-top:15px;flex-wrap:wrap;">
                        <button class="btn-primary" id="tbiSimulateBtn" style="flex:1;">‚ñ∂ Run DBS Session</button>
                        <button class="btn-secondary" id="tbiOptimizeBtn" style="flex:1;">‚ö° Optimize Params</button>
                    </div>
                </div>

                <!-- Live Results -->
                <div class="card">
                    <h3>üìä Simulation Results</h3>

                    <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:16px;">
                        <div
                            style="background:rgba(255,255,255,0.04);border-radius:10px;padding:14px;text-align:center;">
                            <div style="font-size:0.8em;color:#888;margin-bottom:4px;">TBI Recovery Index</div>
                            <div id="tbiTRI" style="font-size:2.2em;font-weight:700;font-family:monospace;color:#888;">
                                --</div>
                        </div>
                        <div
                            style="background:rgba(255,255,255,0.04);border-radius:10px;padding:14px;text-align:center;">
                            <div style="font-size:0.8em;color:#888;margin-bottom:4px;">GOSE Score</div>
                            <div id="tbiGOSE" style="font-size:1.1em;font-weight:600;font-family:monospace;color:#888;">
                                --</div>
                        </div>
                        <div
                            style="background:rgba(255,255,255,0.04);border-radius:10px;padding:10px;text-align:center;">
                            <div style="font-size:0.8em;color:#888;">ICP Proxy</div>
                            <div id="tbiICP" style="font-size:1.2em;color:#ff9f0a;font-weight:600;">--</div>
                        </div>
                        <div
                            style="background:rgba(255,255,255,0.04);border-radius:10px;padding:10px;text-align:center;">
                            <div style="font-size:0.8em;color:#888;">GCS Score</div>
                            <div id="tbiGCS" style="font-size:1.2em;color:#0a84ff;font-weight:600;">--</div>
                        </div>
                    </div>

                    <div style="font-size:0.8em;color:#888;margin-bottom:6px;">Stim Effect: <span id="tbiStimEffect"
                            style="color:#00d4ff;">--</span></div>

                    <h4 style="margin-bottom:8px;font-size:0.9em;color:#aaa;">Regional Neural Activity</h4>
                    <div id="tbiActivityBars"></div>
                </div>
            </div>

            <!-- Biomarkers -->
            <div class="card" style="margin-top:16px;">
                <h3>ü©∫ Biomarker Panel</h3>
                <div id="tbioBiomarkersGrid"
                    style="display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:10px;margin-top:10px;">
                </div>
            </div>

            <!-- Recovery Prediction -->
            <div class="card" style="margin-top:16px;">
                <div style="display:flex;justify-content:space-between;align-items:center;">
                    <h3>üìà Recovery Trajectory Prediction</h3>
                    <button class="btn-primary" id="tbiPredictBtn" style="font-size:0.85em;">Predict Recovery</button>
                </div>
                <canvas id="tbiRecoveryCanvas" width="900" height="280"
                    style="width:100%;margin-top:12px;border:1px solid #333;border-radius:8px;"></canvas>

                <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin-top:14px;">
                    <div style="text-align:center;">
                        <div style="font-size:0.8em;color:#888;">Initial TRI</div>
                        <div id="tbiPredInitTRI" style="font-size:1.3em;font-family:monospace;color:#fff;">--</div>
                    </div>
                    <div style="text-align:center;">
                        <div style="font-size:0.8em;color:#888;">Final TRI</div>
                        <div id="tbiPredFinalTRI" style="font-size:1.3em;font-family:monospace;">--</div>
                    </div>
                    <div style="text-align:center;">
                        <div style="font-size:0.8em;color:#888;">Response Rate</div>
                        <div id="tbiPredResp" style="font-size:1.3em;font-family:monospace;color:#0a84ff;">--</div>
                    </div>
                    <div style="text-align:center;">
                        <div style="font-size:0.8em;color:#888;">Final GOSE</div>
                        <div id="tbiPredFinalGOSE" style="font-size:1em;font-family:monospace;">--</div>
                    </div>
                </div>
                <div id="tbiResponderBadge" style="text-align:center;margin-top:10px;font-size:1.1em;font-weight:700;">
                </div>
            </div>

            <!-- Optimizer Results -->
            <div class="card" style="margin-top:16px;display:none;" id="tbiOptResults">
                <h3>‚ö° Parameter Optimization Results</h3>
                <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin:12px 0;">
                    <div style="text-align:center;">
                        <div style="font-size:0.8em;color:#888;">Optimal Freq</div>
                        <div id="tbiOptFreq" style="font-size:1.3em;color:#0a84ff;font-weight:600;">--</div>
                    </div>
                    <div style="text-align:center;">
                        <div style="font-size:0.8em;color:#888;">Optimal Amp</div>
                        <div id="tbiOptAmp" style="font-size:1.3em;color:#32d74b;font-weight:600;">--</div>
                    </div>
                    <div style="text-align:center;">
                        <div style="font-size:0.8em;color:#888;">Pulse Width</div>
                        <div id="tbiOptPW" style="font-size:1.3em;color:#ff9f0a;font-weight:600;">--</div>
                    </div>
                    <div style="text-align:center;">
                        <div style="font-size:0.8em;color:#888;">Best TRI</div>
                        <div id="tbiOptBestTRI" style="font-size:1.3em;font-weight:700;font-family:monospace;">--</div>
                    </div>
                </div>
                <h4 style="font-size:0.9em;color:#aaa;margin-bottom:6px;">Top 5 Parameter Combinations</h4>
                <div id="tbiOptTopResults" style="font-family:monospace;"></div>
            </div>

            <!-- Clinical Trial -->
            <div class="card" style="margin-top:16px;">
                <h3>üè• Population-Level Clinical Trial</h3>
                <div style="display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap;">
                    <div class="control-group" style="margin-bottom:0;flex:1;min-width:120px;">
                        <label>Sample Size (N)</label>
                        <input type="number" id="tbiTrialN" value="30" min="10" max="200">
                    </div>
                    <button class="btn-primary" id="tbiTrialBtn" style="white-space:nowrap;">üìä Run Trial</button>
                </div>

                <div id="tbiTrialResults" style="display:none;margin-top:16px;">
                    <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-bottom:14px;">
                        <div
                            style="background:rgba(255,255,255,0.04);border-radius:8px;padding:12px;text-align:center;">
                            <div style="font-size:0.8em;color:#888;">Pre-DBS TRI</div>
                            <div id="tbiTrialPreTRI" style="font-size:1.4em;font-family:monospace;color:#ff453a;">--
                            </div>
                        </div>
                        <div
                            style="background:rgba(255,255,255,0.04);border-radius:8px;padding:12px;text-align:center;">
                            <div style="font-size:0.8em;color:#888;">Post-DBS TRI</div>
                            <div id="tbiTrialPostTRI" style="font-size:1.4em;font-family:monospace;">--</div>
                        </div>
                        <div
                            style="background:rgba(255,255,255,0.04);border-radius:8px;padding:12px;text-align:center;">
                            <div style="font-size:0.8em;color:#888;">Responder Rate</div>
                            <div id="tbiTrialResponderRate"
                                style="font-size:1.4em;font-family:monospace;color:#34c759;">--</div>
                        </div>
                        <div
                            style="background:rgba(255,255,255,0.04);border-radius:8px;padding:12px;text-align:center;">
                            <div style="font-size:0.8em;color:#888;">p-value</div>
                            <div id="tbiTrialPValue" style="font-size:1.2em;font-family:monospace;">--</div>
                        </div>
                        <div
                            style="background:rgba(255,255,255,0.04);border-radius:8px;padding:12px;text-align:center;">
                            <div style="font-size:0.8em;color:#888;">Pre GOSE</div>
                            <div id="tbiTrialPreGOSE" style="font-size:1.2em;font-family:monospace;color:#ff9f0a;">--
                            </div>
                        </div>
                        <div
                            style="background:rgba(255,255,255,0.04);border-radius:8px;padding:12px;text-align:center;">
                            <div style="font-size:0.8em;color:#888;">Post GOSE</div>
                            <div id="tbiTrialPostGOSE" style="font-size:1.2em;font-family:monospace;color:#34c759;">--
                            </div>
                        </div>
                    </div>
                    <div id="tbiTrialSig" style="text-align:center;font-weight:700;font-size:1.1em;margin-bottom:12px;">
                    </div>
                    <canvas id="tbiTrialCanvas" width="900" height="220"
                        style="width:100%;border:1px solid #333;border-radius:8px;"></canvas>
                </div>
            </div>

            <p style="text-align:center;color:#555;margin-top:20px;font-size:0.8em;">‚ö† RESEARCH &amp; EDUCATIONAL USE
                ONLY ‚Äî Not for clinical application</p>
        </div>
        <!-- END TBI Module -->

        <!-- Chart.js for visualizations -->
        <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

        <!-- Three.js for 3D brain visualization -->
        <script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>

        <!-- Module Scripts -->
        <script src="circuit_designer.js"></script>
        <script src="brain_visualizer.js"></script>
        <script src="waveform_generator.js"></script>
        <script src="ai_optimizer.js"></script>
        <script src="clinical_dashboard.js"></script>
        <script src="fea_interface.js"></script>
        <script src="protocol_interface.js"></script>
        <script src="quantum_optimizer_ui.js"></script>
        <script src="ocd_dashboard.js"></script>
        <script src="asd_dashboard.js"></script>


        <!-- Main Application Controller (must be last) -->
        <script src="sad_dashboard.js"></script>
        <script src="hate_crime_tbi_dashboard.js"></script>
        <script src="app.js"></script>
</body>

</html>